(function() {
  var popoverButtons, popoverCloseX;

  popoverButtons = "<div class=\"form-group clearfix last\">\n    <hr/>\n    <button type=\"button\" ng-click=\"popover.cancel($event)\" class=\"btn btn-sm btn-default pull-left\">Cancel</button>\n\n    <button type=\"button\" ng-click=\"popover.remove($event)\" class=\"btn btn-sm btn-danger pull-left\">Delete</button>\n\n    <button type=\"submit\" ng-click=\"popover.save($event)\" class=\"btn btn-sm btn-primary pull-right\">Save</button>\n</div>";

  popoverCloseX = "<button type=\"button\" class=\"close\" ng-click=\"popover.cancel($event)\" aria-label=\"Close\" title=\"Close\"><span aria-hidden=\"true\">&times;</span></button>";

  angular.module('builder.components', ['builder', 'validator.rules']).config([
    '$builderProvider', function($builderProvider) {
      $builderProvider.registerComponent('message', {
        group: 'Basic',
        placeholder: 'Rich Content',
        label: 'Rich Content',
        template: "<div class=\"row\" id=\"{{formName+index | nospace}}\">\n  <div class=\"form-group text-center\">\n      <rich-text><strong>Text Message</strong></rich-text>\n    </div>\n  <div id=\"dashedline\" class=\"hr-line-dashed\"></div>\n</div>",
        popoverTemplate: "<form>\n\n    <div role=\"tabpanel\">\n\n        <!-- Nav tabs -->\n        <ul class=\"nav nav-justified nav-tabs\" role=\"tablist\" style=\"margin-left:-10px\">\n            <li role=\"presentation\" class=\"active\"><a href=\"{{'#properties' + date + index}}\" aria-controls=\"{{'properties' + date + index}}\" role=\"tab\" data-toggle=\"tab\">Properties</a></li>\n            <li role=\"presentation\" class=\"disabled\"><a>Validations</a></li>\n            <li role=\"presentation\"><a href=\"{{'#logic' + date + index}}\" aria-controls=\"{{'logic' + date + index}}\" role=\"tab\" data-toggle=\"tab\">Logic</a></li>\n            <li role=\"presentation\" class=\"disabled\"><a>Points</a></li>\n        </ul>\n\n        <!-- Tab panes -->\n        <div class=\"tab-content\">\n            <div role=\"tabpanel\" class=\"tab-pane active\" id=\"{{'properties' + date + index}}\">\n                <div class=\"form-group m-t-sm\">\n                    <label class='control-label'>Placeholder</label>\n                    <input type='text' ng-model=\"placeholder\" class='form-control'/>\n                </div>\n                <div class=\"form-group m-t\">\n                  <a class=\"btn btn-success btn-block\" ng-click=\"openSummerNote()\">Open Rich Text Editor</a>\n                </div>\n            </div>\n            <div role=\"tabpanel\" class=\"tab-pane\" id=\"{{'validations' + date + index}}\">\n            </div>\n            <div role=\"tabpanel\" class=\"tab-pane\" id=\"{{'logic' + date + index}}\">\n                <div class=\"form-group m-t\">\n                    <select class=\"form-control custom-m-b\" ng-model=\"formObject.logic.action\" ng-options=\"action for action in actions\"></select><p> this element if</p>\n                    <select ng-model=\"formObject.logic.component\" class=\"form-control custom-m-b\">\n\n                      <optgroup ng-repeat=\"(groupName, items) in fields\" label=\"{{'Page: ' + groupName}}\">\n                          <option ng-selected=\"item.id === formObject.logic.component.id\" ng-show=\"keys.indexOf(groupName) < keys.indexOf(currentForm) || (keys.indexOf(groupName) === keys.indexOf(currentForm) && item.index < formObject.index)\" ng-repeat=\"item in fields[groupName]\" value=\"{{item}}\">{{item.component}} - {{item.label}}</option>\n                      </optgroup>\n                    </select>\n                    <select class=\"form-control custom-m-b\" ng-model=\"formObject.logic.comparator\" ng-options=\"comparator for comparator in comparatorChoices\">\n                    </select>\n                    <input type=\"text\" ng-model=\"formObject.logic.value\" class=\"form-control\" placeholder=\"Value\">\n                </div>\n            </div>\n            <div role=\"tabpanel\" class=\"tab-pane\" id=\"{{'points' + date + index}}\">\n            </div>\n        </div>\n    </div>\n\n    " + popoverButtons + "\n</form>"
      });
      $builderProvider.registerComponent('email', {
        group: 'Basic',
        label: 'Email Input',
        description: '',
        requireConfirmation: false,
        required: false,
        readOnly: false,
        template: "<div class=\"row\" id=\"{{formName+index | nospace}}\">\n      <label class=\"col-sm-2 control-label\" for=\"{{formName+index}}\" ng-class=\"{'fb-required':required}\">{{label}}\n      </label>\n        <div class=\"col-sm-10\">\n            <div class=\"input-group m-b\">\n             <span class=\"input-group-addon\">@</span>\n             <input ng-readonly=\"readOnly\" type=\"email\" ng-model=\"inputText.email\" placeholder=\"Email\" class=\"form-control custom-m-b\" validator-required=\"{{required}}\" validator-group=\"{{formName}}\">\n           </div>\n           <div class=\"input-group m-b\">\n             <span ng-show=\"requireConfirmation\" class=\"input-group-addon\">@</span>\n             <input ng-readonly=\"readOnly\" type=\"email\" ng-show=\"requireConfirmation\" ng-model=\"inputText.confirmation\" placeholder=\"Confirm email\" class=\"form-control m-b\" id=\"confirmEmail\">\n           </div>\n        </div>\n    <div class=\"col-sm-10 col-sm-offset-2\">\n      <small ng-show=\"description\" class='help-block text-muted custom-small'>{{description}}</small>\n    </div>\n</div>\n<div id=\"dashedline\" class=\"hr-line-dashed\"></div>",
        popoverTemplate: "" + popoverCloseX + "\n<form>\n\n    <div role=\"tabpanel\">\n\n        <!-- Nav tabs -->\n        <ul class=\"nav nav-justified nav-tabs\" role=\"tablist\" style=\"margin-left:-10px\">\n            <li role=\"presentation\" class=\"active\"><a href=\"{{'#properties' + date + index}}\" aria-controls=\"{{'properties' + date + index}}\" role=\"tab\" data-toggle=\"tab\">Properties</a></li>\n            <li role=\"presentation\"><a href=\"{{'#validations' + date + index}}\" aria-controls=\"{{'validations' + date + index}}\" role=\"tab\" data-toggle=\"tab\">Validations</a></li>\n            <li role=\"presentation\"><a href=\"{{'#logic' + date + index}}\" aria-controls=\"{{'logic' + date + index}}\" role=\"tab\" data-toggle=\"tab\">Logic</a></li>\n            <li role=\"presentation\"><a href=\"{{'#points' + date + index}}\" aria-controls=\"{{'points' + date + index}}\" role=\"tab\" data-toggle=\"tab\">Points</a></li>\n        </ul>\n\n        <!-- Tab panes -->\n        <div class=\"tab-content\">\n            <div role=\"tabpanel\" class=\"tab-pane active\" id=\"{{'properties' + date + index}}\">\n                <div class=\"form-group m-t-sm\">\n                    <label class='control-label'>Label</label>\n                    <input type='text' ng-model=\"label\" validator=\"[required]\" class='form-control'/>\n                </div>\n                <div class=\"form-group\">\n                    <label class='control-label'>Description</label>\n                    <input type='text' ng-model=\"description\" class='form-control'/>\n                </div>\n                <div class=\"checkbox\">\n                    <label>\n                        <input type='checkbox' check-repeat ng-model=\"readOnly\" />\n                        Read Only</label>\n                </div>\n            </div>\n            <div role=\"tabpanel\" class=\"tab-pane\" id=\"{{'validations' + date + index}}\">\n                <div class=\"checkbox m-t\">\n                    <label>\n                        <input type='checkbox' check-repeat ng-model=\"required\" />\n                        Required</label>\n                </div>\n                <div class=\"checkbox\">\n                    <label>\n                        <input type='checkbox' check-repeat ng-model=\"requireConfirmation\" />\n                        Require Email Confirmation</label>\n                </div>\n                <div class=\"form-group\" ng-if=\"validationOptions.length > 0\">\n                    <label class='control-label'>Validation</label>\n                    <select ng-model=\"$parent.validation\" class='form-control' ng-options=\"option.rule as option.label for option in validationOptions\"></select>\n                </div>\n            </div>\n            <div role=\"tabpanel\" class=\"tab-pane\" id=\"{{'logic' + date + index}}\">\n                <div class=\"form-group m-t\">\n                    <select class=\"form-control custom-m-b\" ng-model=\"formObject.logic.action\" ng-options=\"action for action in actions\"></select><p> this element if</p>\n                    <select ng-model=\"formObject.logic.component\" class=\"form-control custom-m-b\">\n\n                      <optgroup ng-repeat=\"(groupName, items) in fields\" label=\"{{'Page: ' + groupName}}\">\n                          <option ng-selected=\"item.id === formObject.logic.component.id\" ng-show=\"keys.indexOf(groupName) < keys.indexOf(currentForm) || (keys.indexOf(groupName) === keys.indexOf(currentForm) && item.index < formObject.index)\" ng-repeat=\"item in fields[groupName]\" value=\"{{item}}\">{{item.component}} - {{item.label}}</option>\n                      </optgroup>\n                    </select>\n                    <select class=\"form-control custom-m-b\" ng-model=\"formObject.logic.comparator\" ng-options=\"comparator for comparator in comparatorChoices\">\n                    </select>\n                    <input type=\"text\" ng-model=\"formObject.logic.value\" class=\"form-control\" placeholder=\"Value\">\n                </div>\n            </div>\n\n            <div role=\"tabpanel\" class=\"tab-pane p-t-n\" id=\"{{'points' + date + index}}\">\n\n              <div class=\"form-group\" ng-if=\"formObject.pointRules.length > 0\">\n                <label class=\"control-label m-t-c--5\">Active Rules</label>\n                <div class=\"m-t-xs\" ng-repeat=\"rule in formObject.pointRules\">\n                  Add <span class=\"label label-primary\">{{rule.points}}</span> points if this field <span class=\"label label-primary\">{{rule.predicate | predicate}}</span>&nbsp;<span class=\"label label-primary\" ng-if=\"rule.predicate !== 'null' && rule.predicate !== 'not_null'\">{{rule.value}}</span> <a ng-click=\"removeRule(rule)\" class=\"pull-right btn btn-sm btn-link hover-dark-grey-link btn-xs\"><i class=\"fa fa-times-circle\"></i></a>\n                </div>\n              </div>\n              <div class=\"form-group custom-m-b\">\n                  <div class=\"input-group\">\n                    <span class=\"input-group-addon add-points\">Add</span>\n                    <input type=\"text\" class=\"form-control\" ng-model=\"newRule.points\">\n                    <span class=\"input-group-addon add-points\">points</span>\n                  </div>\n              </div>\n\n              <div class=\"form-group custom-m-b\">\n                <div class=\"input-group\">\n                  <span class=\"input-group-addon add-points\">if this field</span>\n                  <select ng-model=\"newRule.predicate\" ng-options=\"predicate.value as predicate.label for predicate in predicates\" class=\"form-control\"></select>\n                </div>\n              </div>\n\n              <div class=\"input-group\">\n                <input ng-readonly=\"newRule.predicate === 'null' || newRule.predicate === 'not_null'\" ng-model=\"newRule.value\" type=\"text\" class=\"form-control\" placeholder=\"value\">\n                <span class=\"input-group-btn\">\n                  <button ng-click=\"addRule()\" class=\"btn btn-primary\" type=\"button\">+</button>\n                </span>\n              </div>\n              <p class=\"text-danger\">{{rulesErrorMessage}}</p>\n\n            </div>\n\n    </div>\n\n\n</form>\n" + popoverButtons
      });
      $builderProvider.registerComponent('date', {
        group: 'Basic',
        label: 'Date Picker',
        description: '',
        required: false,
        disableWeekends: false,
        readOnly: false,
        template: "<div class=\"row\" id=\"{{formName+index | nospace}}\">\n      <label class=\"col-sm-2 control-label\" for=\"{{formName+index}}\" ng-class=\"{'fb-required':required}\">{{label}}</label>\n      <div class=\"col-sm-10\">\n        <ui-date weekends=\"{{disableWeekends}}\"></ui-date>\n      </div>\n    <div class=\"col-sm-10 col-sm-offset-2\">\n      <small ng-show=\"description\" class=\"help-block text-muted custom-small\">{{description}}</small>\n    </div>\n</div>\n<div id=\"dashedline\" class=\"hr-line-dashed\"></div>",
        popoverTemplate: "" + popoverCloseX + "\n<form>\n    <div role=\"tabpanel\">\n        <!-- Nav tabs -->\n        <ul class=\"nav nav-justified nav-tabs\" role=\"tablist\" style=\"margin-left:-10px\">\n            <li role=\"presentation\" class=\"active\"><a href=\"{{'#properties' + date + index}}\" aria-controls=\"{{'properties' + date + index}}\" role=\"tab\" data-toggle=\"tab\">Properties</a></li>\n            <li role=\"presentation\"><a href=\"{{'#validations' + date + index}}\" aria-controls=\"{{'validations' + date + index}}\" role=\"tab\" data-toggle=\"tab\">Validations</a></li>\n            <li role=\"presentation\"><a href=\"{{'#logic' + date + index}}\" aria-controls=\"{{'logic' + date + index}}\" role=\"tab\" data-toggle=\"tab\">Logic</a></li>\n            <li role=\"presentation\"><a href=\"{{'#points' + date + index}}\" aria-controls=\"{{'points' + date + index}}\" role=\"tab\" data-toggle=\"tab\">Points</a></li>\n        </ul>\n\n        <!-- Tab panes -->\n        <div class=\"tab-content\">\n            <div role=\"tabpanel\" class=\"tab-pane active\" id=\"{{'properties' + date + index}}\">\n                <div class=\"form-group m-t-sm\">\n                    <label class='control-label'>Label</label>\n                    <input type='text' ng-model=\"label\" validator=\"[required]\" class='form-control'/>\n                </div>\n                <div class=\"form-group\">\n                    <label class='control-label'>Description</label>\n                    <input type='text' ng-model=\"description\" class='form-control'/>\n                </div>\n                <div class=\"checkbox\">\n                    <label>\n                        <input type='checkbox' check-repeat ng-model=\"readOnly\" />\n                        Read Only</label>\n                </div>\n            </div>\n            <div role=\"tabpanel\" class=\"tab-pane\" id=\"{{'validations' + date + index}}\">\n                <div class=\"checkbox m-t\">\n                    <label>\n                        <input type='checkbox' check-repeat ng-model=\"required\" />\n                        Required</label>\n                </div>\n                <div class=\"checkbox\">\n                    <label>\n                        <input type='checkbox' check-repeat ng-model=\"disableWeekends\" />\n                        Disable Weekends</label>\n                </div>\n                <div class=\"form-group\" ng-if=\"validationOptions.length > 0\">\n                    <label class='control-label'>Validation</label>\n                    <select ng-model=\"$parent.validation\" class='form-control' ng-options=\"option.rule as option.label for option in validationOptions\"></select>\n                </div>\n                <div class=\"form-group\">\n                    <div class=\"row\">\n                        <div class=\"col-sm-3\">\n                            Date is in next\n                        </div>\n                        <div class=\"col-sm-7\">\n                            <select class=\"form-control\" ng-model=\"nextXDays\" ng-options=\"value for value in [1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30]\"></select>\n                        </div>\n                        <div class=\"col-sm-2\">\n                            days\n                        </div>\n                    </div>\n                </div>\n            </div>\n            <div role=\"tabpanel\" class=\"tab-pane\" id=\"{{'logic' + date + index}}\">\n                <div class=\"form-group m-t\">\n                    <select class=\"form-control custom-m-b\" ng-model=\"formObject.logic.action\" ng-options=\"action for action in actions\"></select><p> this element if</p>\n                    <select ng-model=\"formObject.logic.component\" class=\"form-control custom-m-b\">\n\n                      <optgroup ng-repeat=\"(groupName, items) in fields\" label=\"{{'Page: ' + groupName}}\">\n                          <option ng-selected=\"item.id === formObject.logic.component.id\" ng-show=\"keys.indexOf(groupName) < keys.indexOf(currentForm) || (keys.indexOf(groupName) === keys.indexOf(currentForm) && item.index < formObject.index)\" ng-repeat=\"item in fields[groupName]\" value=\"{{item}}\">{{item.component}} - {{item.label}}</option>\n                      </optgroup>\n                    </select>\n                    <select class=\"form-control custom-m-b\" ng-model=\"formObject.logic.comparator\" ng-options=\"comparator for comparator in comparatorChoices\">\n                    </select>\n                    <input type=\"text\" ng-model=\"formObject.logic.value\" class=\"form-control\" placeholder=\"Value\">\n                </div>\n            </div>\n            <div role=\"tabpanel\" class=\"tab-pane p-t-n\" id=\"{{'points' + date + index}}\">\n\n              <div class=\"form-group\" ng-if=\"formObject.pointRules.length > 0\">\n                <label class=\"control-label m-t-c--5\">Active Rules</label>\n                <div class=\"m-t-xs\" ng-repeat=\"rule in formObject.pointRules\">\n                  Add <span class=\"label label-primary\">{{rule.points}}</span> points if this field <span class=\"label label-primary\">{{rule.predicate | predicate}}</span>&nbsp;<span class=\"label label-primary\" ng-if=\"rule.predicate !== 'null' && rule.predicate !== 'not_null'\">{{rule.value}}</span> <a ng-click=\"removeRule(rule)\" class=\"pull-right btn btn-sm btn-link hover-dark-grey-link btn-xs\"><i class=\"fa fa-times-circle\"></i></a>\n                </div>\n              </div>\n              <div class=\"form-group custom-m-b\">\n                  <div class=\"input-group\">\n                    <span class=\"input-group-addon add-points\">Add</span>\n                    <input type=\"text\" class=\"form-control\" ng-model=\"newRule.points\">\n                    <span class=\"input-group-addon add-points\">points</span>\n                  </div>\n              </div>\n\n              <div class=\"form-group custom-m-b\">\n                <div class=\"input-group\">\n                  <span class=\"input-group-addon add-points\">if this field</span>\n                  <select ng-model=\"newRule.predicate\" ng-options=\"predicate.value as predicate.label for predicate in predicates\" class=\"form-control\"></select>\n                </div>\n              </div>\n\n              <div class=\"input-group\">\n                <input ng-readonly=\"newRule.predicate === 'null' || newRule.predicate === 'not_null'\" ng-model=\"newRule.value\" type=\"text\" class=\"form-control\" placeholder=\"value\">\n                <span class=\"input-group-btn\">\n                  <button ng-click=\"addRule()\" class=\"btn btn-primary\" type=\"button\">+</button>\n                </span>\n              </div>\n              <p class=\"text-danger\">{{rulesErrorMessage}}</p>\n\n            </div>\n\n        </div>\n    </div>\n</form>\n" + popoverButtons
      });
      $builderProvider.registerComponent('text', {
        group: 'Basic',
        label: 'Text Input',
        description: '',
        placeholder: 'placeholder',
        readOnly: false,
        minLength: 0,
        maxLength: 999,
        minRange: 0,
        maxRange: 99999,
        required: false,
        validationOptions: [
          {
            label: 'None',
            rule: '/.*/'
          }, {
            label: 'Text',
            rule: '[text]'
          }, {
            label: 'Number',
            rule: '[numberRange]'
          }
        ],
        template: "<div class=\"row\" id=\"{{formName+index | nospace}}\">\n    <label class=\"col-sm-2 control-label\" for=\"{{formName+index}}\" ng-class=\"{'fb-required':required}\">{{label}}</label>\n    <div class=\"col-sm-10\">\n        <input type=\"text\" ng-readonly=\"readOnly\" ng-model=\"inputText\" validator-required=\"{{required}}\" validator-group=\"{{formName}}\" class=\"form-control m-b\" placeholder=\"{{placeholder}}\"/>\n    </div>\n  <div class=\"col-sm-10 col-sm-offset-2\">\n    <small ng-show=\"description\" class=\"help-block text-muted custom-small\">{{description}}</small>\n  </div>\n</div>\n<div id=\"dashedline\" class=\"hr-line-dashed\"></div>",
        popoverTemplate: "" + popoverCloseX + "\n<form>\n\n    <div role=\"tabpanel\">\n\n        <!-- Nav tabs -->\n        <ul class=\"nav nav-justified nav-tabs\" role=\"tablist\" style=\"margin-left:-10px\">\n            <li role=\"presentation\" class=\"active\"><a href=\"{{'#properties' + date + index}}\" aria-controls=\"{{'properties' + date + index}}\" role=\"tab\" data-toggle=\"tab\">Properties</a></li>\n            <li role=\"presentation\"><a href=\"{{'#validations' + date + index}}\" aria-controls=\"{{'validations' + date + index}}\" role=\"tab\" data-toggle=\"tab\">Validations</a></li>\n            <li role=\"presentation\"><a href=\"{{'#logic' + date + index}}\" aria-controls=\"{{'logic' + date + index}}\" role=\"tab\" data-toggle=\"tab\">Logic</a></li>\n            <li role=\"presentation\"><a href=\"{{'#points' + date + index}}\" aria-controls=\"{{'points' + date + index}}\" role=\"tab\" data-toggle=\"tab\">Points</a></li>\n        </ul>\n\n        <!-- Tab panes -->\n        <div class=\"tab-content\">\n            <div role=\"tabpanel\" class=\"tab-pane active\" id=\"{{'properties' + date + index}}\">\n                <div class=\"form-group m-t-sm\">\n                    <label class='control-label'>Label</label>\n                    <input type='text' ng-model=\"label\" validator=\"[required]\" class='form-control'/>\n                </div>\n                <div class=\"form-group\">\n                    <label class='control-label'>Description</label>\n                    <input type='text' ng-model=\"description\" class='form-control'/>\n                </div>\n                <div class=\"form-group\">\n                    <label class='control-label'>Placeholder</label>\n                    <input type='text' ng-model=\"placeholder\" class='form-control'/>\n                </div>\n                <div class=\"checkbox\">\n                    <label>\n                        <input type='checkbox' check-repeat ng-model=\"readOnly\" />\n                        Read Only</label>\n                </div>\n            </div>\n            <div role=\"tabpanel\" class=\"tab-pane\" id=\"{{'validations' + date + index}}\">\n                <div class=\"checkbox m-t\">\n                    <label>\n                        <input type='checkbox' check-repeat ng-model=\"required\" />\n                        Required</label>\n                </div>\n                <div class=\"form-group\" ng-if=\"validationOptions.length > 0\">\n                    <label class='control-label'>Validation</label>\n                    <select ng-model=\"$parent.validation\" class='form-control' ng-options=\"option.rule as option.label for option in validationOptions\"></select>\n                </div>\n                <div class=\"row\" ng-show=\"validation==='[text]'\">\n                    <div class=\"form-group col-sm-6\">\n                        <input type=\"text\" class=\"form-control\" ng-model=\"minLength\" placeholder=\"Min Length\">\n                    </div>\n                    <div class=\"form-group col-sm-6\">\n                        <input type=\"text\" class=\"form-control\" ng-model=\"maxLength\" placeholder=\"Max Length\">\n                    </div>\n                </div>\n                <div class=\"row\" ng-show=\"validation==='[numberRange]'\">\n                    <div class=\"form-group col-sm-6\">\n                        <input type=\"text\" class=\"form-control\" ng-model=\"minRange\" placeholder=\"Min Range\">\n                    </div>\n                    <div class=\"form-group col-sm-6\">\n                        <input type=\"text\" class=\"form-control\" ng-model=\"maxRange\" placeholder=\"Max Range\">\n                    </div>\n                    <div class=\"form-group col-sm-6\">\n                        <input type=\"text\" class=\"form-control\" ng-model=\"minLength\" placeholder=\"Min Length\">\n                    </div>\n                    <div class=\"form-group col-sm-6\">\n                        <input type=\"text\" class=\"form-control\" ng-model=\"maxLength\" placeholder=\"Max Length\">\n                    </div>\n                </div>\n            </div>\n            <div role=\"tabpanel\" class=\"tab-pane\" id=\"{{'logic' + date + index}}\">\n                <div class=\"form-group m-t\">\n                    <select class=\"form-control custom-m-b\" ng-model=\"formObject.logic.action\" ng-options=\"action for action in actions\"></select><p> this element if</p>\n                    <select ng-model=\"formObject.logic.component\" class=\"form-control custom-m-b\">\n\n                      <optgroup ng-repeat=\"(groupName, items) in fields\" label=\"{{'Page: ' + groupName}}\">\n                          <option ng-selected=\"item.id === formObject.logic.component.id\" ng-show=\"keys.indexOf(groupName) < keys.indexOf(currentForm) || (keys.indexOf(groupName) === keys.indexOf(currentForm) && item.index < formObject.index)\" ng-repeat=\"item in fields[groupName]\" value=\"{{item}}\">{{item.component}} - {{item.label}}</option>\n                      </optgroup>\n                    </select>\n                    <select class=\"form-control custom-m-b\" ng-model=\"formObject.logic.comparator\" ng-options=\"comparator for comparator in comparatorChoices\">\n                    </select>\n                    <input type=\"text\" ng-model=\"formObject.logic.value\" class=\"form-control\" placeholder=\"Value\">\n                </div>\n            </div>\n            <div role=\"tabpanel\" class=\"tab-pane p-t-n\" id=\"{{'points' + date + index}}\">\n\n              <div class=\"form-group\" ng-if=\"formObject.pointRules.length > 0\">\n                <label class=\"control-label m-t-c--5\">Active Rules</label>\n                <div class=\"m-t-xs\" ng-repeat=\"rule in formObject.pointRules\">\n                  Add <span class=\"label label-primary\">{{rule.points}}</span> points if this field <span class=\"label label-primary\">{{rule.predicate | predicate}}</span>&nbsp;<span class=\"label label-primary\" ng-if=\"rule.predicate !== 'null' && rule.predicate !== 'not_null'\">{{rule.value}}</span> <a ng-click=\"removeRule(rule)\" class=\"pull-right btn btn-sm btn-link hover-dark-grey-link btn-xs\"><i class=\"fa fa-times-circle\"></i></a>\n                </div>\n              </div>\n              <div class=\"form-group custom-m-b\">\n                  <div class=\"input-group\">\n                    <span class=\"input-group-addon add-points\">Add</span>\n                    <input type=\"text\" class=\"form-control\" ng-model=\"newRule.points\">\n                    <span class=\"input-group-addon add-points\">points</span>\n                  </div>\n              </div>\n\n              <div class=\"form-group custom-m-b\">\n                <div class=\"input-group\">\n                  <span class=\"input-group-addon add-points\">if this field</span>\n                  <select ng-model=\"newRule.predicate\" ng-options=\"predicate.value as predicate.label for predicate in predicates\" class=\"form-control\"></select>\n                </div>\n              </div>\n\n              <div class=\"input-group\">\n                <input ng-readonly=\"newRule.predicate === 'null' || newRule.predicate === 'not_null'\" ng-model=\"newRule.value\" type=\"text\" class=\"form-control\" placeholder=\"value\">\n                <span class=\"input-group-btn\">\n                  <button ng-click=\"addRule()\" class=\"btn btn-primary\" type=\"button\">+</button>\n                </span>\n              </div>\n              <p class=\"text-danger\">{{rulesErrorMessage}}</p>\n\n            </div>\n        </div>\n    </div>\n</form>\n" + popoverButtons
      });
      $builderProvider.registerComponent('area', {
        group: 'Basic',
        label: 'Text Area',
        description: '',
        placeholder: 'placeholder',
        required: false,
        readOnly: false,
        template: "<div class=\"row\" id=\"{{formName+index | nospace}}\">\n    <label class=\"col-sm-2 control-label\" for=\"{{formName+index}}\" ng-class=\"{'fb-required':required}\">{{label}}</label>\n    <div class=\"col-sm-10\">\n        <textarea type=\"text\" ng-readonly=\"readOnly\" ng-model=\"inputText\" validator-required=\"{{required}}\" validator-group=\"{{formName}}\" class=\"form-control m-b\" rows='6' placeholder=\"{{placeholder}}\"/>\n    </div>\n    <div class=\"col-sm-10 col-sm-offset-2\">\n      <small ng-show=\"description\" class=\"help-block text-muted custom-small\">{{description}}</small>\n    </div>\n</div>\n<div id=\"dashedline\" class=\"hr-line-dashed\"></div>",
        popoverTemplate: "" + popoverCloseX + "\n<form>\n\n    <div role=\"tabpanel\">\n\n        <!-- Nav tabs -->\n        <ul class=\"nav nav-justified nav-tabs\" role=\"tablist\" style=\"margin-left:-10px\">\n            <li role=\"presentation\" class=\"active\"><a href=\"{{'#properties' + date + index}}\" aria-controls=\"{{'properties' + date + index}}\" role=\"tab\" data-toggle=\"tab\">Properties</a></li>\n            <li role=\"presentation\"><a href=\"{{'#validations' + date + index}}\" aria-controls=\"{{'validations' + date + index}}\" role=\"tab\" data-toggle=\"tab\">Validations</a></li>\n            <li role=\"presentation\"><a href=\"{{'#logic' + date + index}}\" aria-controls=\"{{'logic' + date + index}}\" role=\"tab\" data-toggle=\"tab\">Logic</a></li>\n            <li role=\"presentation\"><a href=\"{{'#points' + date + index}}\" aria-controls=\"{{'points' + date + index}}\" role=\"tab\" data-toggle=\"tab\">Points</a></li>\n        </ul>\n\n        <!-- Tab panes -->\n        <div class=\"tab-content\">\n            <div role=\"tabpanel\" class=\"tab-pane active\" id=\"{{'properties' + date + index}}\">\n                <div class=\"form-group m-t-sm\">\n                    <label class='control-label'>Label</label>\n                    <input type='text' ng-model=\"label\" validator=\"[required]\" class='form-control'/>\n                </div>\n                <div class=\"form-group\">\n                    <label class='control-label'>Description</label>\n                    <input type='text' ng-model=\"description\" class='form-control'/>\n                </div>\n                <div class=\"form-group\">\n                    <label class='control-label'>Placeholder</label>\n                    <input type='text' ng-model=\"placeholder\" class='form-control'/>\n                </div>\n                <div class=\"checkbox\">\n                    <label>\n                        <input type='checkbox' check-repeat ng-model=\"readOnly\" />\n                        Read Only</label>\n                </div>\n            </div>\n            <div role=\"tabpanel\" class=\"tab-pane\" id=\"{{'validations' + date + index}}\">\n                <div class=\"checkbox m-t\">\n                    <label>\n                        <input type='checkbox' check-repeat ng-model=\"required\" />\n                        Required</label>\n                </div>\n            </div>\n            <div role=\"tabpanel\" class=\"tab-pane\" id=\"{{'logic' + date + index}}\">\n                <div class=\"form-group m-t\">\n                    <select class=\"form-control custom-m-b\" ng-model=\"formObject.logic.action\" ng-options=\"action for action in actions\"></select><p> this element if</p>\n                    <select ng-model=\"formObject.logic.component\" class=\"form-control custom-m-b\">\n\n                      <optgroup ng-repeat=\"(groupName, items) in fields\" label=\"{{'Page: ' + groupName}}\">\n                          <option ng-selected=\"item.id === formObject.logic.component.id\" ng-show=\"keys.indexOf(groupName) < keys.indexOf(currentForm) || (keys.indexOf(groupName) === keys.indexOf(currentForm) && item.index < formObject.index)\" ng-repeat=\"item in fields[groupName]\" value=\"{{item}}\">{{item.component}} - {{item.label}}</option>\n                      </optgroup>\n                    </select>\n                    <select class=\"form-control custom-m-b\" ng-model=\"formObject.logic.comparator\" ng-options=\"comparator for comparator in comparatorChoices\">\n                    </select>\n                    <input type=\"text\" ng-model=\"formObject.logic.value\" class=\"form-control\" placeholder=\"Value\">\n                </div>\n            </div>\n            <div role=\"tabpanel\" class=\"tab-pane p-t-n\" id=\"{{'points' + date + index}}\">\n\n              <div class=\"form-group\" ng-if=\"formObject.pointRules.length > 0\">\n                <label class=\"control-label m-t-c--5\">Active Rules</label>\n                <div class=\"m-t-xs\" ng-repeat=\"rule in formObject.pointRules\">\n                  Add <span class=\"label label-primary\">{{rule.points}}</span> points if this field <span class=\"label label-primary\">{{rule.predicate | predicate}}</span>&nbsp;<span class=\"label label-primary\" ng-if=\"rule.predicate !== 'null' && rule.predicate !== 'not_null'\">{{rule.value}}</span> <a ng-click=\"removeRule(rule)\" class=\"pull-right btn btn-sm btn-link hover-dark-grey-link btn-xs\"><i class=\"fa fa-times-circle\"></i></a>\n                </div>\n              </div>\n              <div class=\"form-group custom-m-b\">\n                  <div class=\"input-group\">\n                    <span class=\"input-group-addon add-points\">Add</span>\n                    <input type=\"text\" class=\"form-control\" ng-model=\"newRule.points\">\n                    <span class=\"input-group-addon add-points\">points</span>\n                  </div>\n              </div>\n\n              <div class=\"form-group custom-m-b\">\n                <div class=\"input-group\">\n                  <span class=\"input-group-addon add-points\">if this field</span>\n                  <select ng-model=\"newRule.predicate\" ng-options=\"predicate.value as predicate.label for predicate in predicates\" class=\"form-control\"></select>\n                </div>\n              </div>\n\n              <div class=\"input-group\">\n                <input ng-readonly=\"newRule.predicate === 'null' || newRule.predicate === 'not_null'\" ng-model=\"newRule.value\" type=\"text\" class=\"form-control\" placeholder=\"value\">\n                <span class=\"input-group-btn\">\n                  <button ng-click=\"addRule()\" class=\"btn btn-primary\" type=\"button\">+</button>\n                </span>\n              </div>\n              <p class=\"text-danger\">{{rulesErrorMessage}}</p>\n\n            </div>\n        </div>\n    </div>\n</form>\n" + popoverButtons
      });
      $builderProvider.registerComponent('checkbox', {
        group: 'Choice',
        label: 'Checkbox',
        description: '',
        placeholder: 'placeholder',
        required: false,
        options: ['value one', 'value two'],
        arrayToText: true,
        readOnly: false,
        template: "<div class=\"row\" id=\"{{formName+index | nospace}}\">\n    <label for=\"{{formName+index}}\" class=\"col-sm-2 control-label\" ng-class=\"{'fb-required':required}\">{{label}}</label>\n    <div class=\"col-sm-10\">\n        <input type='hidden' ng-model=\"inputText\" validator-required=\"{{required}}\" validator-group=\"{{formName}}\"/>\n        <div class='checkbox' ng-repeat=\"item in options track by $index\">\n          <label>\n            <input checked=\"\" ng-disabled=\"readOnly\" type='checkbox' check-repeat ng-model=\"inputArray[$index]\" ng-value='item'/>\n                <i></i>\n                {{item}}\n          </label>\n        </div>\n    </div>\n    <div class=\"col-sm-10 col-sm-offset-2\">\n      <small ng-show=\"description\" class=\"help-block text-muted custom-small\">{{description}}</small>\n    </div>\n</div>\n<div id=\"dashedline\" class=\"hr-line-dashed\"></div>",
        popoverTemplate: "" + popoverCloseX + "\n<form>\n\n    <div role=\"tabpanel\">\n\n        <!-- Nav tabs -->\n        <ul class=\"nav nav-justified nav-tabs\" role=\"tablist\" style=\"margin-left:-10px\">\n            <li role=\"presentation\" class=\"active\"><a href=\"{{'#properties' + date + index}}\" aria-controls=\"{{'properties' + date + index}}\" role=\"tab\" data-toggle=\"tab\">Properties</a></li>\n            <li role=\"presentation\"><a href=\"{{'#validations' + date + index}}\" aria-controls=\"{{'validations' + date + index}}\" role=\"tab\" data-toggle=\"tab\">Validations</a></li>\n            <li role=\"presentation\"><a href=\"{{'#logic' + date + index}}\" aria-controls=\"{{'logic' + date + index}}\" role=\"tab\" data-toggle=\"tab\">Logic</a></li>\n            <li role=\"presentation\"><a href=\"{{'#points' + date + index}}\" aria-controls=\"{{'points' + date + index}}\" role=\"tab\" data-toggle=\"tab\">Points</a></li>\n        </ul>\n\n        <!-- Tab panes -->\n        <div class=\"tab-content\">\n            <div role=\"tabpanel\" class=\"tab-pane active\" id=\"{{'properties' + date + index}}\">\n                <div class=\"form-group m-t-sm\">\n                    <label class='control-label'>Label</label>\n                    <input type='text' ng-model=\"label\" validator=\"[required]\" class='form-control'/>\n                </div>\n                <div class=\"form-group\">\n                    <label class='control-label'>Description</label>\n                    <input type='text' ng-model=\"description\" class='form-control'/>\n                </div>\n                <div class=\"form-group\">\n                    <label class='control-label'>Options</label>\n                    <textarea class=\"form-control\" rows=\"3\" ng-model=\"optionsText\"/>\n                </div>\n                <div class=\"checkbox\">\n                    <label>\n                        <input type='checkbox' check-repeat ng-model=\"readOnly\" />\n                        Read Only</label>\n                </div>\n            </div>\n            <div role=\"tabpanel\" class=\"tab-pane\" id=\"{{'validations' + date + index}}\">\n                <div class=\"checkbox m-t\">\n                    <label>\n                        <input type='checkbox' check-repeat ng-model=\"required\" />\n                        Required\n                    </label>\n                </div>\n            </div>\n            <div role=\"tabpanel\" class=\"tab-pane\" id=\"{{'logic' + date + index}}\">\n                <div class=\"form-group m-t\">\n                    <select class=\"form-control custom-m-b\" ng-model=\"formObject.logic.action\" ng-options=\"action for action in actions\"></select><p> this element if</p>\n                    <select ng-model=\"formObject.logic.component\" class=\"form-control custom-m-b\">\n\n                      <optgroup ng-repeat=\"(groupName, items) in fields\" label=\"{{'Page: ' + groupName}}\">\n                          <option ng-selected=\"item.id === formObject.logic.component.id\" ng-show=\"keys.indexOf(groupName) < keys.indexOf(currentForm) || (keys.indexOf(groupName) === keys.indexOf(currentForm) && item.index < formObject.index)\" ng-repeat=\"item in fields[groupName]\" value=\"{{item}}\">{{item.component}} - {{item.label}}</option>\n                      </optgroup>\n                    </select>\n                    <select class=\"form-control custom-m-b\" ng-model=\"formObject.logic.comparator\" ng-options=\"comparator for comparator in comparatorChoices\">\n                    </select>\n                    <input type=\"text\" ng-model=\"formObject.logic.value\" class=\"form-control\" placeholder=\"Value\">\n                </div>\n            </div>\n            <div role=\"tabpanel\" class=\"tab-pane p-t-n\" id=\"{{'points' + date + index}}\">\n\n              <div class=\"form-group\" ng-if=\"formObject.pointRules.length > 0\">\n                <label class=\"control-label m-t-c--5\">Active Rules</label>\n                <div class=\"m-t-xs\" ng-repeat=\"rule in formObject.pointRules\">\n                  Add <span class=\"label label-primary\">{{rule.points}}</span> points if this field <span class=\"label label-primary\">{{rule.predicate | predicate}}</span>&nbsp;<span class=\"label label-primary\" ng-if=\"rule.predicate !== 'null' && rule.predicate !== 'not_null'\">{{rule.value}}</span> <a ng-click=\"removeRule(rule)\" class=\"pull-right btn btn-sm btn-link hover-dark-grey-link btn-xs\"><i class=\"fa fa-times-circle\"></i></a>\n                </div>\n              </div>\n              <div class=\"form-group custom-m-b\">\n                  <div class=\"input-group\">\n                    <span class=\"input-group-addon add-points\">Add</span>\n                    <input type=\"text\" class=\"form-control\" ng-model=\"newRule.points\">\n                    <span class=\"input-group-addon add-points\">points</span>\n                  </div>\n              </div>\n\n              <div class=\"form-group custom-m-b\">\n                <div class=\"input-group\">\n                  <span class=\"input-group-addon add-points\">if this field</span>\n                  <select ng-model=\"newRule.predicate\" ng-options=\"predicate.value as predicate.label for predicate in predicates\" class=\"form-control\"></select>\n                </div>\n              </div>\n\n              <div class=\"input-group\">\n                <input ng-readonly=\"newRule.predicate === 'null' || newRule.predicate === 'not_null'\" ng-model=\"newRule.value\" type=\"text\" class=\"form-control\" placeholder=\"value\">\n                <span class=\"input-group-btn\">\n                  <button ng-click=\"addRule()\" class=\"btn btn-primary\" type=\"button\">+</button>\n                </span>\n              </div>\n              <p class=\"text-danger\">{{rulesErrorMessage}}</p>\n\n            </div>\n        </div>\n    </div>\n</form>\n" + popoverButtons
      });
      $builderProvider.registerComponent('radio', {
        group: 'Choice',
        label: 'Radio',
        description: '',
        placeholder: 'placeholder',
        required: false,
        readOnly: false,
        options: ['value one', 'value two'],
        template: "<div class=\"row\" id=\"{{formName+index | nospace}}\">\n    <label for=\"{{formName+index}}\" class=\"col-sm-2 control-label\" ng-class=\"{'fb-required':required}\">{{label}}</label>\n    <div class=\"col-sm-10\">\n        <div class='radio' ng-repeat=\"item in options track by $index\">\n            <label>\n            <input ng-disabled=\"readOnly\" name='{{formName+index}}' ng-model=\"$parent.inputText\" validator-group=\"{{formName}}\" ng-value='item' type='radio' check-repeat/>\n                {{item}}\n            </label>\n        </div>\n    </div>\n    <div class=\"col-sm-10 col-sm-offset-2\">\n      <small ng-show=\"description\" class=\"help-block text-muted custom-small\">{{description}}</small>\n    </div>\n</div>\n<div id=\"dashedline\" class=\"hr-line-dashed\"></div>",
        popoverTemplate: "" + popoverCloseX + "\n<form>\n\n    <div role=\"tabpanel\">\n\n        <!-- Nav tabs -->\n        <ul class=\"nav nav-justified nav-tabs\" role=\"tablist\" style=\"margin-left:-10px\">\n            <li role=\"presentation\" class=\"active\"><a href=\"{{'#properties' + date + index}}\" aria-controls=\"{{'properties' + date + index}}\" role=\"tab\" data-toggle=\"tab\">Properties</a></li>\n            <li role=\"presentation\" class=\"disabled\"><a>Validations</a></li>\n            <li role=\"presentation\"><a href=\"{{'#logic' + date + index}}\" aria-controls=\"{{'logic' + date + index}}\" role=\"tab\" data-toggle=\"tab\">Logic</a></li>\n            <li role=\"presentation\"><a href=\"{{'#points' + date + index}}\" aria-controls=\"{{'points' + date + index}}\" role=\"tab\" data-toggle=\"tab\">Points</a></li>\n        </ul>\n\n        <!-- Tab panes -->\n        <div class=\"tab-content\">\n            <div role=\"tabpanel\" class=\"tab-pane active\" id=\"{{'properties' + date + index}}\">\n                <div class=\"form-group m-t-sm\">\n                    <label class='control-label'>Label</label>\n                    <input type='text' ng-model=\"label\" validator=\"[required]\" class='form-control'/>\n                </div>\n                <div class=\"form-group\">\n                    <label class='control-label'>Description</label>\n                    <input type='text' ng-model=\"description\" class='form-control'/>\n                </div>\n                <div class=\"form-group\">\n                    <label class='control-label'>Options</label>\n                    <textarea class=\"form-control\" rows=\"3\" ng-model=\"optionsText\"/>\n                </div>\n                <div class=\"checkbox\">\n                    <label>\n                        <input type='checkbox' check-repeat ng-model=\"readOnly\" />\n                        Read Only</label>\n                </div>\n            </div>\n            <div role=\"tabpanel\" class=\"tab-pane\" id=\"{{'validations' + date + index}}\">\n                <div class=\"checkbox m-t\">\n                    <label>\n                        <input type='checkbox' check-repeat ng-model=\"required\" />\n                        Required\n                    </label>\n                </div>\n            </div>\n            <div role=\"tabpanel\" class=\"tab-pane\" id=\"{{'logic' + date + index}}\">\n                <div class=\"form-group m-t\">\n                    <select class=\"form-control\" ng-model=\"formObject.logic.action\" ng-options=\"action for action in ['Hide', 'Show']\"></select><p> this element if</p>\n                    <select ng-model=\"formObject.logic.component\" class=\"form-control custom-m-b\">\n\n                      <optgroup ng-repeat=\"(groupName, items) in fields\" label=\"{{'Page: ' + groupName}}\">\n                          <option ng-selected=\"item.id === formObject.logic.component.id\" ng-show=\"keys.indexOf(groupName) < keys.indexOf(currentForm) || (keys.indexOf(groupName) === keys.indexOf(currentForm) && item.index < formObject.index)\" ng-repeat=\"item in fields[groupName]\" value=\"{{item}}\">{{item.component}} - {{item.label}}</option>\n                      </optgroup>\n                    </select>\n                    <select class=\"form-control  custom-m-b\" ng-model=\"formObject.logic.comparator\" ng-options=\"comparator for comparator in comparatorChoices\">\n                    </select>\n                    <input type=\"text\" ng-model=\"formObject.logic.value\" class=\"form-control\" placeholder=\"Value\">\n                </div>\n            </div>\n\n            <div role=\"tabpanel\" class=\"tab-pane p-t-n\" id=\"{{'points' + date + index}}\">\n\n              <div class=\"form-group\" ng-if=\"formObject.pointRules.length > 0\">\n                <label class=\"control-label m-t-c--5\">Active Rules</label>\n                <div class=\"m-t-xs\" ng-repeat=\"rule in formObject.pointRules\">\n                  Add <span class=\"label label-primary\">{{rule.points}}</span> points if this field <span class=\"label label-primary\">{{rule.predicate | predicate}}</span>&nbsp;<span class=\"label label-primary\" ng-if=\"rule.predicate !== 'null' && rule.predicate !== 'not_null'\">{{rule.value}}</span> <a ng-click=\"removeRule(rule)\" class=\"pull-right btn btn-sm btn-link hover-dark-grey-link btn-xs\"><i class=\"fa fa-times-circle\"></i></a>\n                </div>\n              </div>\n              <div class=\"form-group custom-m-b\">\n                  <div class=\"input-group\">\n                    <span class=\"input-group-addon add-points\">Add</span>\n                    <input type=\"text\" class=\"form-control\" ng-model=\"newRule.points\">\n                    <span class=\"input-group-addon add-points\">points</span>\n                  </div>\n              </div>\n\n              <div class=\"form-group custom-m-b\">\n                <div class=\"input-group\">\n                  <span class=\"input-group-addon add-points\">if this field</span>\n                  <select ng-model=\"newRule.predicate\" ng-options=\"predicate.value as predicate.label for predicate in predicates\" class=\"form-control\"></select>\n                </div>\n              </div>\n\n              <div class=\"input-group\">\n                <input ng-readonly=\"newRule.predicate === 'null' || newRule.predicate === 'not_null'\" ng-model=\"newRule.value\" type=\"text\" class=\"form-control\" placeholder=\"value\">\n                <span class=\"input-group-btn\">\n                  <button ng-click=\"addRule()\" class=\"btn btn-primary\" type=\"button\">+</button>\n                </span>\n              </div>\n              <p class=\"text-danger\">{{rulesErrorMessage}}</p>\n\n            </div>\n        </div>\n    </div>\n</form>\n" + popoverButtons
      });
      return $builderProvider.registerComponent('select', {
        group: 'Choice',
        label: 'Select',
        description: '',
        placeholder: 'placeholder',
        multiple: false,
        required: false,
        readOnly: false,
        options: ['value one', 'value two'],
        template: "<div class=\"row\" id=\"{{formName+index | nospace}}\">\n    <label class=\"col-sm-2 control-label\" for=\"{{formName+index}}\" ng-class=\"{'fb-required':required}\">{{label}}</label>\n    <div class=\"col-sm-10 dropdown\">\n        <select ng-show=\"!multiple\" ng-readonly=\"readOnly\" ng-options=\"value for value in options\" class=\"form-control m-b\"\n            ng-model=\"inputText\" ng-init=\"inputText = options[0]\"/>\n        <select ng-show=\"multiple\" ng-readonly=\"readOnly\" ng-options=\"value for value in options\" class=\"form-control m-b\"\n            ng-model=\"inputText\" multiple ng-init=\"inputText = options[0]\"/>\n    </div>\n    <div class=\"col-sm-10 col-sm-offset-2\">\n      <small ng-show=\"description\" class=\"help-block text-muted custom-small\">{{description}}</small>\n    </div>\n</div>\n<div id=\"dashedline\" class=\"hr-line-dashed\"></div>",
        popoverTemplate: "" + popoverCloseX + "\n<form>\n\n    <div role=\"tabpanel\">\n\n        <!-- Nav tabs -->\n        <ul class=\"nav nav-justified nav-tabs\" role=\"tablist\" style=\"margin-left:-10px\">\n            <li role=\"presentation\" class=\"active\"><a href=\"{{'#properties' + date + index}}\" aria-controls=\"{{'properties' + date + index}}\" role=\"tab\" data-toggle=\"tab\">Properties</a></li>\n            <li role=\"presentation\"><a href=\"{{'#validations' + date + index}}\" aria-controls=\"{{'validations' + date + index}}\" role=\"tab\" data-toggle=\"tab\">Validations</a></li>\n            <li role=\"presentation\"><a href=\"{{'#logic' + date + index}}\" aria-controls=\"{{'logic' + date + index}}\" role=\"tab\" data-toggle=\"tab\">Logic</a></li>\n            <li role=\"presentation\"><a href=\"{{'#points' + date + index}}\" aria-controls=\"{{'points' + date + index}}\" role=\"tab\" data-toggle=\"tab\">Points</a></li>\n        </ul>\n\n        <!-- Tab panes -->\n        <div class=\"tab-content\">\n            <div role=\"tabpanel\" class=\"tab-pane active\" id=\"{{'properties' + date + index}}\">\n                <div class=\"form-group m-t-sm\">\n                    <label class='control-label'>Label</label>\n                    <input type='text' ng-model=\"label\" validator=\"[required]\" class='form-control'/>\n                </div>\n                <div class=\"form-group\">\n                    <label class='control-label'>Description</label>\n                    <input type='text' ng-model=\"description\" class='form-control'/>\n                </div>\n                <div class=\"form-group\">\n                    <label class='control-label'>Options</label>\n                    <textarea class=\"form-control\" rows=\"3\" ng-model=\"optionsText\"/>\n                </div>\n                <div class=\"checkbox\">\n                    <label>\n                        <input type='checkbox' check-repeat ng-model=\"readOnly\" />\n                        Read Only</label>\n                </div>\n            </div>\n            <div role=\"tabpanel\" class=\"tab-pane\" id=\"{{'validations' + date + index}}\">\n                <div class=\"checkbox m-t\">\n                    <label>\n                        <input type='checkbox' check-repeat ng-model=\"required\" />\n                        Required\n                    </label>\n                </div>\n                <div class=\"form-group\" ng-if=\"validationOptions.length > 0\">\n                    <label class='control-label'>Validation</label>\n                    <select ng-model=\"$parent.validation\" class='form-control' ng-options=\"option.rule as option.label for option in validationOptions\"></select>\n                </div>\n                <div class=\"checkbox\">\n                    <label>\n                        <input type='checkbox' check-repeat ng-model=\"multiple\" />\n                        Multiple Select</label>\n                </div>\n            </div>\n            <div role=\"tabpanel\" class=\"tab-pane\" id=\"{{'logic' + date + index}}\">\n                <div class=\"form-group m-t\">\n                    <select class=\"form-control custom-m-b\" ng-model=\"formObject.logic.action\" ng-options=\"action for action in actions\"></select><p> this element if</p>\n                    <select ng-model=\"formObject.logic.component\" class=\"form-control custom-m-b\">\n\n                      <optgroup ng-repeat=\"(groupName, items) in fields\" label=\"{{'Page: ' + groupName}}\">\n                          <option ng-selected=\"item.id === formObject.logic.component.id\" ng-show=\"keys.indexOf(groupName) < keys.indexOf(currentForm) || (keys.indexOf(groupName) === keys.indexOf(currentForm) && item.index < formObject.index)\" ng-repeat=\"item in fields[groupName]\" value=\"{{item}}\">{{item.component}} - {{item.label}}</option>\n                      </optgroup>\n                    </select>\n                    <select class=\"form-control custom-m-b\" ng-model=\"formObject.logic.comparator\" ng-options=\"comparator for comparator in comparatorChoices\">\n                    </select>\n                    <input type=\"text\" ng-model=\"formObject.logic.value\" class=\"form-control\" placeholder=\"Value\">\n                </div>\n            </div>\n            <div role=\"tabpanel\" class=\"tab-pane p-t-n\" id=\"{{'points' + date + index}}\">\n\n              <div class=\"form-group\" ng-if=\"formObject.pointRules.length > 0\">\n                <label class=\"control-label m-t-c--5\">Active Rules</label>\n                <div class=\"m-t-xs\" ng-repeat=\"rule in formObject.pointRules\">\n                  Add <span class=\"label label-primary\">{{rule.points}}</span> points if this field <span class=\"label label-primary\">{{rule.predicate | predicate}}</span>&nbsp;<span class=\"label label-primary\" ng-if=\"rule.predicate !== 'null' && rule.predicate !== 'not_null'\">{{rule.value}}</span> <a ng-click=\"removeRule(rule)\" class=\"pull-right btn btn-sm btn-link hover-dark-grey-link btn-xs\"><i class=\"fa fa-times-circle\"></i></a>\n                </div>\n              </div>\n              <div class=\"form-group custom-m-b\">\n                  <div class=\"input-group\">\n                    <span class=\"input-group-addon add-points\">Add</span>\n                    <input type=\"text\" class=\"form-control\" ng-model=\"newRule.points\">\n                    <span class=\"input-group-addon add-points\">points</span>\n                  </div>\n              </div>\n\n              <div class=\"form-group custom-m-b\">\n                <div class=\"input-group\">\n                  <span class=\"input-group-addon add-points\">if this field</span>\n                  <select ng-model=\"newRule.predicate\" ng-options=\"predicate.value as predicate.label for predicate in predicates\" class=\"form-control\"></select>\n                </div>\n              </div>\n\n              <div class=\"input-group\">\n                <input ng-readonly=\"newRule.predicate === 'null' || newRule.predicate === 'not_null'\" ng-model=\"newRule.value\" type=\"text\" class=\"form-control\" placeholder=\"value\">\n                <span class=\"input-group-btn\">\n                  <button ng-click=\"addRule()\" class=\"btn btn-primary\" type=\"button\">+</button>\n                </span>\n              </div>\n              <p class=\"text-danger\">{{rulesErrorMessage}}</p>\n\n            </div>\n        </div>\n    </div>\n</form>\n" + popoverButtons
      }, $builderProvider.registerComponent('address', {
        group: 'Advanced',
        label: 'Address Field',
        description: '',
        required: false,
        readOnly: false,
        options: [],
        template: "<div class=\"row\" id=\"{{formName+index | nospace}}\">\n    <label class=\"col-sm-2 control-label\" for=\"{{formName+index}}\" ng-class=\"{'fb-required':required}\">{{label}}</label>\n    <div class=\"col-sm-10\">\n        <input type=\"text\" ng-readonly=\"readOnly\" ng-model=\"inputText.StreetName\" class=\"form-control custom-m-b\" placeholder=\"Street Name\"/>\n        <input type=\"text\" ng-readonly=\"readOnly\" ng-model=\"inputText.Number\" class=\"form-control custom-m-b\" placeholder=\"Number\"/>\n        <input type=\"text\" ng-readonly=\"readOnly\" ng-model=\"inputText.Letter\" class=\"form-control custom-m-b\" placeholder=\"Letter\"/>\n        <input type=\"text\" ng-readonly=\"readOnly\" ng-model=\"inputText.Floor\" class=\"form-control custom-m-b\" placeholder=\"Floor\"/>\n        <input type=\"text\" ng-readonly=\"readOnly\" ng-model=\"inputText.PlaceName\" class=\"form-control custom-m-b\" placeholder=\"Place Name\"/>\n        <input type=\"text\" ng-readonly=\"readOnly\" ng-model=\"inputText.PostCode\" class=\"form-control custom-m-b\" placeholder=\"Post Code\"/>\n        <input type=\"text\" ng-readonly=\"readOnly\" ng-model=\"inputText.City\" class=\"form-control m-b\" placeholder=\"City\" validator-required={{required}} validator-group={{formName}}/>\n    </div>\n    <div class=\"col-sm-10 col-sm-offset-2\">\n        <small ng-show=\"description\" class=\"help-block text-muted custom-small\">{{description}}</small>\n    </div>\n</div>\n<div id=\"dashedline\" class=\"hr-line-dashed\"></div>",
        popoverTemplate: "" + popoverCloseX + "\n<form>\n\n    <div role=\"tabpanel\">\n\n        <!-- Nav tabs -->\n        <ul class=\"nav nav-justified nav-tabs\" role=\"tablist\" style=\"margin-left:-10px\">\n            <li role=\"presentation\" class=\"active\"><a href=\"{{'#properties' + date + index}}\" aria-controls=\"{{'properties' + date + index}}\" role=\"tab\" data-toggle=\"tab\">Properties</a></li>\n            <li role=\"presentation\"><a href=\"{{'#validations' + date + index}}\" aria-controls=\"{{'validations' + date + index}}\" role=\"tab\" data-toggle=\"tab\">Validations</a></li>\n            <li role=\"presentation\"><a href=\"{{'#logic' + date + index}}\" aria-controls=\"{{'logic' + date + index}}\" role=\"tab\" data-toggle=\"tab\">Logic</a></li>\n            <li role=\"presentation\"><a href=\"{{'#points' + date + index}}\" aria-controls=\"{{'points' + date + index}}\" role=\"tab\" data-toggle=\"tab\">Points</a></li>\n        </ul>\n\n        <!-- Tab panes -->\n        <div class=\"tab-content\">\n            <div role=\"tabpanel\" class=\"tab-pane active\" id=\"{{'properties' + date + index}}\">\n                <div class=\"form-group m-t-sm\">\n                    <label class='control-label'>Label</label>\n                    <input type='text' ng-model=\"label\" validator=\"[required]\" class='form-control'/>\n                </div>\n                <div class=\"form-group\">\n                    <label class='control-label'>Description</label>\n                    <input type='text' ng-model=\"description\" class='form-control'/>\n                </div>\n                <div class=\"checkbox\">\n                    <label>\n                        <input type='checkbox' check-repeat ng-model=\"readOnly\" />\n                        Read Only</label>\n                </div>\n            </div>\n            <div role=\"tabpanel\" class=\"tab-pane\" id=\"{{'validations' + date + index}}\">\n                <div class=\"checkbox m-t\">\n                    <label>\n                        <input type='checkbox' check-repeat ng-model=\"required\" />\n                        Required</label>\n                </div>\n                <div class=\"form-group\" ng-if=\"validationOptions.length > 0\">\n                    <label class='control-label'>Validation</label>\n                    <select ng-model=\"$parent.validation\" class='form-control' ng-options=\"option.rule as option.label for option in validationOptions\"></select>\n                </div>\n            </div>\n            <div role=\"tabpanel\" class=\"tab-pane\" id=\"{{'logic' + date + index}}\">\n                <div class=\"form-group m-t\">\n                    <select class=\"form-control custom-m-b\" ng-model=\"formObject.logic.action\" ng-options=\"action for action in actions\"></select><p> this element if</p>\n                    <select ng-model=\"formObject.logic.component\" class=\"form-control custom-m-b\">\n\n                      <optgroup ng-repeat=\"(groupName, items) in fields\" label=\"{{'Page: ' + groupName}}\">\n                          <option ng-selected=\"item.id === formObject.logic.component.id\" ng-show=\"keys.indexOf(groupName) < keys.indexOf(currentForm) || (keys.indexOf(groupName) === keys.indexOf(currentForm) && item.index < formObject.index)\" ng-repeat=\"item in fields[groupName]\" value=\"{{item}}\">{{item.component}} - {{item.label}}</option>\n                      </optgroup>\n                    </select>\n                    <select class=\"form-control custom-m-b\" ng-model=\"formObject.logic.comparator\" ng-options=\"comparator for comparator in comparatorChoices\">\n                    </select>\n                    <input type=\"text\" ng-model=\"formObject.logic.value\" class=\"form-control\" placeholder=\"Value\">\n                </div>\n            </div>\n            <div role=\"tabpanel\" class=\"tab-pane p-t-n\" id=\"{{'points' + date + index}}\">\n\n              <div class=\"form-group\" ng-if=\"formObject.pointRules.length > 0\">\n                <label class=\"control-label m-t-c--5\">Active Rules</label>\n                <div class=\"m-t-xs\" ng-repeat=\"rule in formObject.pointRules\">\n                  Add <span class=\"label label-primary\">{{rule.points}}</span> points if this field <span class=\"label label-primary\">{{rule.predicate | predicate}}</span>&nbsp;<span class=\"label label-primary\" ng-if=\"rule.predicate !== 'null' && rule.predicate !== 'not_null'\">{{rule.value}}</span> <a ng-click=\"removeRule(rule)\" class=\"pull-right btn btn-sm btn-link hover-dark-grey-link btn-xs\"><i class=\"fa fa-times-circle\"></i></a>\n                </div>\n              </div>\n              <div class=\"form-group custom-m-b\">\n                  <div class=\"input-group\">\n                    <span class=\"input-group-addon add-points\">Add</span>\n                    <input type=\"text\" class=\"form-control\" ng-model=\"newRule.points\">\n                    <span class=\"input-group-addon add-points\">points</span>\n                  </div>\n              </div>\n\n              <div class=\"form-group custom-m-b\">\n                <div class=\"input-group\">\n                  <span class=\"input-group-addon add-points\">if this field</span>\n                  <select ng-model=\"newRule.predicate\" ng-options=\"predicate.value as predicate.label for predicate in predicates\" class=\"form-control\"></select>\n                </div>\n              </div>\n\n              <div class=\"input-group\">\n                <input ng-readonly=\"newRule.predicate === 'null' || newRule.predicate === 'not_null'\" ng-model=\"newRule.value\" type=\"text\" class=\"form-control\" placeholder=\"value\">\n                <span class=\"input-group-btn\">\n                  <button ng-click=\"addRule()\" class=\"btn btn-primary\" type=\"button\">+</button>\n                </span>\n              </div>\n              <p class=\"text-danger\">{{rulesErrorMessage}}</p>\n\n            </div>\n        </div>\n\n    </div>\n</form>\n" + popoverButtons
      }, $builderProvider.registerComponent('signature', {
        group: 'Advanced',
        label: 'Signature Pad',
        decription: 'description',
        required: false,
        readOnly: false,
        template: "<div class=\"row\" id=\"{{formName+index | nospace}}\">\n    <label class=\"col-sm-2 control-label\" for=\"{{formName+index}}\" ng-class=\"{'fb-required':required}\">{{label}}</label>\n\n    <div class=\"col-sm-10\">\n        <div class=\"m-b\">\n            <signature-pad></signature-pad>\n        </div>\n    </div>\n    <div class=\"col-sm-10 col-sm-offset-2\">\n        <small ng-show=\"description\" class=\"help-block text-muted custom-small\">{{description}}</small>\n    </div>\n</div>\n<div id=\"dashedline\" class=\"hr-line-dashed\"></div>",
        popoverTemplate: "" + popoverCloseX + "\n<form>\n\n    <div role=\"tabpanel\">\n\n        <!-- Nav tabs -->\n        <ul class=\"nav nav-justified nav-tabs\" role=\"tablist\" style=\"margin-left:-10px\">\n            <li role=\"presentation\" class=\"active\"><a href=\"{{'#properties' + date + index}}\" aria-controls=\"{{'properties' + date + index}}\" role=\"tab\" data-toggle=\"tab\">Properties</a></li>\n            <li role=\"presentation\"><a href=\"{{'#validations' + date + index}}\" aria-controls=\"{{'validations' + date + index}}\" role=\"tab\" data-toggle=\"tab\">Validations</a></li>\n            <li role=\"presentation\"><a href=\"{{'#logic' + date + index}}\" aria-controls=\"{{'logic' + date + index}}\" role=\"tab\" data-toggle=\"tab\">Logic</a></li>\n            <li role=\"presentation\"><a href=\"{{'#points' + date + index}}\" aria-controls=\"{{'points' + date + index}}\" role=\"tab\" data-toggle=\"tab\">Points</a></li>\n        </ul>\n\n        <!-- Tab panes -->\n        <div class=\"tab-content\">\n            <div role=\"tabpanel\" class=\"tab-pane active\" id=\"{{'properties' + date + index}}\">\n                <div class=\"form-group m-t-sm\">\n                    <label class='control-label'>Label</label>\n                    <input type='text' ng-model=\"label\" validator=\"[required]\" class='form-control'/>\n                </div>\n                <div class=\"form-group\">\n                    <label class='control-label'>Description</label>\n                    <input type='text' ng-model=\"description\" class='form-control'/>\n                </div>\n                <div class=\"checkbox\">\n                    <label>\n                        <input type='checkbox' check-repeat ng-model=\"readOnly\" />\n                        Read Only</label>\n                </div>\n            </div>\n            <div role=\"tabpanel\" class=\"tab-pane\" id=\"{{'validations' + date + index}}\">\n                <div class=\"checkbox\">\n                    <label>\n                        <input type='checkbox' check-repeat ng-model=\"required\"/>\n                        Required</label>\n                </div>\n            </div>\n            <div role=\"tabpanel\" class=\"tab-pane\" id=\"{{'logic' + date + index}}\">\n                <div class=\"form-group m-t\">\n                    <select class=\"form-control custom-m-b\" ng-model=\"formObject.logic.action\" ng-options=\"action for action in actions\"></select><p> this element if</p>\n                    <select ng-model=\"formObject.logic.component\" class=\"form-control custom-m-b\">\n\n                      <optgroup ng-repeat=\"(groupName, items) in fields\" label=\"{{'Page: ' + groupName}}\">\n                          <option ng-selected=\"item.id === formObject.logic.component.id\" ng-show=\"keys.indexOf(groupName) < keys.indexOf(currentForm) || (keys.indexOf(groupName) === keys.indexOf(currentForm) && item.index < formObject.index)\" ng-repeat=\"item in fields[groupName]\" value=\"{{item}}\">{{item.component}} - {{item.label}}</option>\n                      </optgroup>\n                    </select>\n                    <select class=\"form-control custom-m-b\" ng-model=\"formObject.logic.comparator\" ng-options=\"comparator for comparator in comparatorChoices\">\n                    </select>\n                    <input type=\"text\" ng-model=\"formObject.logic.value\" class=\"form-control\" placeholder=\"Value\">\n                </div>\n            </div>\n            <div role=\"tabpanel\" class=\"tab-pane p-t-n\" id=\"{{'points' + date + index}}\">\n\n              <div class=\"form-group\" ng-if=\"formObject.pointRules.length > 0\">\n                <label class=\"control-label m-t-c--5\">Active Rules</label>\n                <div class=\"m-t-xs\" ng-repeat=\"rule in formObject.pointRules\">\n                  Add <span class=\"label label-primary\">{{rule.points}}</span> points if this field <span class=\"label label-primary\">{{rule.predicate | predicate}}</span>&nbsp;<span class=\"label label-primary\" ng-if=\"rule.predicate !== 'null' && rule.predicate !== 'not_null'\">{{rule.value}}</span> <a ng-click=\"removeRule(rule)\" class=\"pull-right btn btn-sm btn-link hover-dark-grey-link btn-xs\"><i class=\"fa fa-times-circle\"></i></a>\n                </div>\n              </div>\n              <div class=\"form-group custom-m-b\">\n                  <div class=\"input-group\">\n                    <span class=\"input-group-addon add-points\">Add</span>\n                    <input type=\"text\" class=\"form-control\" ng-model=\"newRule.points\">\n                    <span class=\"input-group-addon add-points\">points</span>\n                  </div>\n              </div>\n\n              <div class=\"form-group custom-m-b\">\n                <div class=\"input-group\">\n                  <span class=\"input-group-addon add-points\">if this field</span>\n                  <select ng-model=\"newRule.predicate\" ng-options=\"predicate.value as predicate.label for predicate in predicates\" class=\"form-control\"></select>\n                </div>\n              </div>\n\n              <div class=\"input-group\">\n                <input ng-readonly=\"newRule.predicate === 'null' || newRule.predicate === 'not_null'\" ng-model=\"newRule.value\" type=\"text\" class=\"form-control\" placeholder=\"value\">\n                <span class=\"input-group-btn\">\n                  <button ng-click=\"addRule()\" class=\"btn btn-primary\" type=\"button\">+</button>\n                </span>\n              </div>\n              <p class=\"text-danger\">{{rulesErrorMessage}}</p>\n\n            </div>\n        </div>\n    </div>\n\n    <div class=\"form-group\" ng-if=\"validationOptions.length > 0\">\n        <label class='control-label'>Validation</label>\n        <select ng-model=\"$parent.validation\" class='form-control' ng-options=\"option.rule as option.label for option in validationOptions\"></select>\n    </div>\n</form>\n" + popoverButtons
      })));
    }
  ]);

}).call(this);
